<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/manangeHotel.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"></script>
    
    
    
    <script src="https://kit.fontawesome.com/599456d19b.js" crossorigin="anonymous"></script>
    
    
    <title>HOTEL</title>
</head>
<body>
    <div id="app"> 
        {{ info }}
        <nav class="navbar navbar-toggleable-md shadow-lg mb-5">
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="m-4" href="index.html" style="color:orange; font-size: 2em;">HOTELVENDER</a>
            
            <div class="collapse navbar-collapse p-1" id="navbarTogglerDemo02">
                <ul class="navbar-nav mr-auto mt-2 mt-md-0">
                    <li class="nav-item active">
                        <a class="nav-link" href="#"> <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="room.html">room</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="reserve.html">reserve</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">dashboard</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="createHotel.html">create hotel</a>
                    </li>
                    
                    
                </ul>
                <div class="mr-auto"></div>
                
                
                
                <form class="form-inline my-2 my-lg-0">
                    
                    <h3 style="color: aliceblue;">{{ user.firstName }}</h3>
                    <a href="login.html"><button class="btn btn-outline-warning my-2 my-sm-0 mr-2" type="button">login</button></a>
                    <a><button class="btn btn-outline-warning my-2 my-sm-0 mr-2" type="submit" v-on:submit="logout()">logout</button></a>
                    
                    <button class="btn btn-outline-warning my-2 my-sm-0" type="submit">register</button>
                    
                </form>
            </div>
        </nav>
        <!-- {{ info }} -->
        
        <!-- <input
            
            @keyup.enter="addUser"
            > -->
            <div class="container">
                
                
                
                
                
                <h1 class="text-center mt-5 text-shadow">Manage Hotel</h1>
                <hr style="width: 50%; border: 1px solid black;" class="mt-0 mb-5">
                
                
                
                
                
                
                
                
                <div class="col a" v-for="hotel in info">
                    <div v-for="yourHotel in hotel.users_id">
                        <div v-if="yourHotel == 22">
                            <div class="card flex-row flex-wrap shadow ml-auto mr-auto m-5" style="width: 80%;" id="hotelCard">
                                <div class="card border-0" style="width: 18em;">
                                    <img src="img/room1.jpg" alt="" style="width: 100%;" class="m-0 p-0">
                                </div>
                                <div class="col m-4">
                                    <h4 class="card-title mb-1"> {{ hotel.hotelName }}</h4>
                                    <i class="fas fa-map-marker-alt"></i> <small>{{ hotel.provinceState}}, {{ hotel.district }}</small> <br>
                                    <small> {{ hotel.additionalDetail }}  </small>  <br>
                                    <small> contact : <span v-for="number in hotel.tel">{{ number }}, </span>  </small>  
                                </div>
                                
                                <div class="row">
                                    <div class="col mt-3 mr-3">
                                        <button class="btn btn-warning my-2 my-sm-0" type="submit">Add Room</button>
                                        <button class="btn btn-warning my-2 my-sm-0" type="submit">Update Hotel</button>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        
                    </div>
                    
                    
                    
                    
                </div>
                
                
                
            </div> 
            
        </div>
        
        
        <script>
            
            
            
            Vue.component('button-counter', {
                data: function () {
                    return {
                        count: 0
                    }
                },
                template: '<button v-on:click="count++">You clicked me {{ count }} times.</button>'
            })
            
            new Vue({
                el: '#app',
                data () {
                    return {
                        info: [], // json hotel ที่ get มา
                        loading: true,
                        errored: false,
                        message : 'hello',
                        searchText: "", // ข้อความในกล่องค้นหา
                        val: "",
                        hotelName: "", 
                        additionalDetail: "",
                        country: "",
                        provinceState: "",
                        district: "",
                        street: "",
                        tel: "",
                        telphone: "",
                        user: "",
                        u_id: [],
                        email: [],
                    }
                },
                
                
                mounted () {
                    
                    axios.get('https://user-259905.appspot.com/user/me',
                    {
                        headers: {
                            Authorization: localStorage.token
                        }
                    })
                    .then((response) => {
                        const data = response.data; // [{}, {}]
                        this.user = data;
                    }),
                    
                    this.info = [];
                    
                    axios.get('https://hotelservice.appspot.com/allhotel')
                    .then((response) => {
                        const data = response.data; // [{}, {}]
                        this.info = data;
                    })
                    .catch(error => {
                        console.log(error)
                        this.errored = true
                    })
                    .finally(() => this.loading = false)
                },
                
                methods: {
                    
                    
                    
                    addHotel() {
                        if(confirm('are you sure?'))
                        this.u_id.push(this.user.id)
                        this.tel = this.user.tel
                        this.email.push(this.user.email)
                        axios.post('https://hotelservice.appspot.com/createhotel', {
                            
                            hotelName: this.hotelName,
                            country: this.country,
                            provinceState: this.provinceState,
                            district: this.district,
                            street: this.street,
                            hotelImages: [],
                            additionalDetail: this.additionalDetail,
                            availible: true,
                            tel: this.tel,
                            email: this.email,
                            users_id: this.u_id,    
                            
                            
                            
                        })
                        .then((response) => {
                            const data = response.data;
                            
                        });
                    }
                }
            })
            
            
            
            
        </script>
        
        
    </body>
    </html>